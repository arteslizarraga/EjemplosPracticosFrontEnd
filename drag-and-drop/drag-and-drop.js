/**
 * Bundled by jsDelivr using Rollup v2.79.2 and Terser v5.39.0.
 * Original file: /npm/@formkit/drag-and-drop@0.5.3/index.mjs
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
function e(e){e.preventDefault()}function t(e){e.stopPropagation()}function n(){const e=new Map;return[function(t,n){e.get(t)&&e.get(t).forEach((e=>{e(n)}))},function(t,n){const a=e.get(t)??[];a.push(n),e.set(t,a)}]}var[a,r]=n();function o(e,t,n=!0,a=["__key"]){if(e===t)return!0;if("object"==typeof t&&"object"==typeof e&&null!==e&&null!==t){if(e instanceof Map)return!1;if(e instanceof Set)return!1;if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(e instanceof RegExp&&t instanceof RegExp)return d=t,(r=e).source===d.source&&r.flags.split("").sort().join("")===d.flags.split("").sort().join("");if(null===e||null===t)return!1;const i=e,l=t;if(Object.keys(i).length!==Object.keys(l).length)return!1;for(const e of a)if((e in i||e in l)&&i[e]!==l[e])return!1;for(const e in i){if(!(e in l))return!1;if(i[e]!==l[e]&&!n)return!1;if(n&&!o(i[e],l[e],n,a))return!1}return!0}var r,d;return!1}function d(e){return e.split(" ").filter((e=>e))}function i(e){return{x:e.clientX,y:e.clientY}}function l(e={}){const t=[{transform:`translateY(${e.yScale||50}%)`},{transform:`translateY(${e.yScale||0}%)`}],n=[{transform:`translateY(-${e.yScale||50}%)`},{transform:`translateY(${e.yScale||0}%)`}],a=[{transform:`translateX(${e.xScale||50}%)`},{transform:`translateX(${e.xScale||0}%)`}],r=[{transform:`translateX(-${e.xScale||50}%)`},{transform:`translateX(${e.xScale||0}%)`}];return o=>{if(H.get(o))return{setup(){document.head.querySelector("[data-drag-and-drop]")},setupNodeRemap(o){if(!ge(B))return;const d=e.duration||150;if(o.node.data.value===B.draggedNode.data.value){switch(B.incomingDirection){case"below":s(o.node.el,t,d);break;case"above":s(o.node.el,n,d);break;case"left":s(o.node.el,r,d);break;case"right":s(o.node.el,a,d)}return}if(!B.affectedNodes.map((e=>e.data.value)).includes(o.node.data.value))return;const i=o.node.el.getBoundingClientRect(),l=B.affectedNodes.findIndex((e=>e.data.value===o.node.data.value)),c=B.draggedNode.data.index>=B.targetIndex;let g;if(g=c?B.affectedNodes[l+1]?B.affectedNodes[l+1]:B.affectedNodes[l-1]:B.affectedNodes[l-1]?B.affectedNodes[l-1]:B.affectedNodes[l+1],g){const e=Math.abs(i.x-g.el.getBoundingClientRect().x),t=Math.abs(i.y-g.el.getBoundingClientRect().y);e>t&&c?s(o.node.el,r,d):e>t&&!c&&s(o.node.el,a,d)}else switch(B.incomingDirection){case"below":s(o.node.el,n,d);break;case"above":s(o.node.el,t,d);break;case"left":s(o.node.el,a,d);break;case"right":s(o.node.el,r,d)}}}}}function s(e,t,n){B&&(B.preventEnter=!0,e.animate(t,{duration:n,easing:"ease-in-out"}),setTimeout((()=>{B&&(B.preventEnter=!1)}),n))}var c,g={draggedOverNodes:[],draggedOverParent:null,targetIndex:0,ascending:!1,insertPoint:null,dragging:!1};function u(e){return t=>{const n=H.get(t);if(!n)return;const a={...n.config,insertConfig:e};return{teardown(){n.abortControllers.root&&n.abortControllers.root.abort()},setup(){a.handleNodeDragover=e.handleNodeDragover||h,a.handleParentPointerover=e.handleParentPointerover||x,a.handleNodePointerover=e.handleNodePointerover||x,a.handleParentDragover=e.handleParentDragover||N;const r=a.handleEnd;a.handleEnd=e=>{!function(e){if(!ge(e)&&!ue(e))return;const t=g.insertPoint;if(g.draggedOverParent){if(g.draggedOverParent){if(e.currentParent.el.contains(e.initialParent.el)){const t=[...oe(e.initialParent.el,e.initialParent.data).filter((e=>!a.some((t=>o(e,t)))))];de(e.initialParent.el,e.initialParent.data,[...t]);const n=oe(g.draggedOverParent.el,g.draggedOverParent.data),a=e.draggedNodes.map((e=>e.data.value)),r=e.initialParent.data.config.insertConfig?.dynamicValues?e.initialParent.data.config.insertConfig.dynamicValues({sourceParent:e.initialParent,targetParent:e.currentParent,draggedNodes:e.draggedNodes,targetNodes:g.draggedOverNodes}):a;n.push(...r),de(g.draggedOverParent.el,g.draggedOverParent.data,[...n])}else{const t=e.draggedNodes.map((e=>e.data.value)),n=oe(g.draggedOverParent.el,g.draggedOverParent.data),a=e.initialParent.data.config.insertConfig?.dynamicValues?e.initialParent.data.config.insertConfig.dynamicValues({sourceParent:e.initialParent,targetParent:e.currentParent,draggedNodes:e.draggedNodes,targetNodes:g.draggedOverNodes}):t;n.push(...a),de(g.draggedOverParent.el,g.draggedOverParent.data,[...n]);const r=[...oe(e.initialParent.el,e.initialParent.data).filter((e=>!t.some((t=>o(e,t)))))];de(e.initialParent.el,e.initialParent.data,[...r])}const t={sourceParent:e.initialParent,targetParent:e.currentParent,draggedNodes:e.draggedNodes,targetNodes:g.draggedOverNodes,state:e};e.initialParent.data.config.insertConfig?.insertEvent&&e.initialParent.data.config.insertConfig.insertEvent(t),e.currentParent.data.config.insertConfig?.insertEvent&&e.currentParent.data.config.insertConfig.insertEvent(t),dt([g.draggedOverParent.el],g.draggedOverParent.data.config.dropZoneClass)}}else{const t=oe(e.initialParent.el,e.initialParent.data),n=e.initialParent.el!==e.currentParent.el;Ne(e.initialParent.el);const a=e.draggedNodes.map((e=>e.data.value)),r=[...e.initialParent.data.enabledNodes],d=e.draggedNodes[0].data.index,i=g.targetIndex;if(!n&&g.draggedOverNodes[0]&&g.draggedOverNodes[0].el!==e.draggedNodes[0].el){const n=[...t.filter((e=>!a.some((t=>o(e,t)))))];let i=g.draggedOverNodes[0].data.index;if(g.targetIndex>e.draggedNodes[0].data.index&&!g.ascending?i--:g.targetIndex<e.draggedNodes[0].data.index&&g.ascending&&i++,n.splice(i,0,...a),de(e.initialParent.el,e.initialParent.data,[...n]),e.initialParent.data.config.onSort){const a={parent:{el:e.initialParent.el,data:e.initialParent.data},previousValues:[...t],previousNodes:[...r],nodes:[...e.initialParent.data.enabledNodes],values:[...n],draggedNodes:e.draggedNodes,targetNodes:g.draggedOverNodes,previousPosition:d,position:i,state:e};e.initialParent.data.config.onSort(a)}}else if(n&&g.draggedOverNodes.length){const t=oe(e.initialParent.el,e.initialParent.data);let n=g.draggedOverNodes[0].data.index||0;g.ascending&&n++;const r=e.initialParent.data.config.insertConfig?.dynamicValues?e.initialParent.data.config.insertConfig.dynamicValues({sourceParent:e.initialParent,targetParent:e.currentParent,draggedNodes:e.draggedNodes,targetNodes:g.draggedOverNodes,targetIndex:n}):a,d=[...t.filter((e=>!a.some((t=>o(e,t)))))];if(e.currentParent.el.contains(e.initialParent.el)){de(e.initialParent.el,e.initialParent.data,[...d]);const t=oe(e.currentParent.el,e.currentParent.data);t.splice(n,0,...r),de(e.currentParent.el,e.currentParent.data,[...t])}else{de(e.initialParent.el,e.initialParent.data,[...d]);const t=oe(e.currentParent.el,e.currentParent.data);t.splice(n,0,...r),de(e.currentParent.el,e.currentParent.data,[...t])}const l={sourceParent:e.initialParent,targetParent:e.currentParent,initialParent:e.initialParent,draggedNodes:e.draggedNodes,targetIndex:i,targetNodes:g.draggedOverNodes,state:e};e.initialParent.data.config.onTransfer&&e.initialParent.data.config.onTransfer(l),e.currentParent.data.config.onTransfer&&e.currentParent.data.config.onTransfer(l)}}t&&(t.el.style.display="none");const n=ue(e)?e.initialParent.data.config.synthDropZoneClass:e.initialParent.data.config.dropZoneClass;dt(g.draggedOverNodes.map((e=>e.el)),n);const a=e.initialParent.data.config.dragPlaceholderClass;dt(e.draggedNodes.map((e=>e.el)),a),g.draggedOverNodes=[],g.draggedOverParent=null}(e),r(e)},n.on("dragStarted",(()=>{c=ut(document,{dragover:f,pointermove:f})})),n.on("dragEnded",(()=>{c?.abort()})),n.config=a,B.on("dragStarted",(()=>{m(t)})),B.on("scrollStarted",(()=>{g.insertPoint&&(g.insertPoint.el.style.display="none")})),B.on("scrollEnded",(()=>{m(t)}));const d=function(e){let t=e.parentElement;for(;t;){const{overflow:e,overflowY:n,overflowX:a}=getComputedStyle(t),r="visible"!==e||"visible"!==n||"visible"!==a,o=t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth,d=t.scrollTop>0||t.scrollLeft>0;if(r&&(o||d))return t;t=t.parentElement}return null}(t);d&&d.addEventListener("scroll",m.bind(null,t)),window.addEventListener("resize",m.bind(null,t))}}}}function f(e){if(!ge(B))return;const t=document.elementFromPoint(e.clientX,e.clientY);if(!(t instanceof HTMLElement)||t===g.insertPoint?.el)return;let n=!1,a=t;for(;a;){if(R.has(a)||H.has(a)){n=!0;break}if(a===document.body)break;a=a.parentElement}n||(g.insertPoint&&(g.insertPoint.el.style.display="none"),g.draggedOverParent&&dt([g.draggedOverParent.el],g.draggedOverParent.data.config.dropZoneClass),g.draggedOverNodes=[],g.draggedOverParent=null,B.currentParent=B.initialParent)}function p(e,t,n){const a=e.top+e.height/2;if(!t){const t=e.height/2+10;return{y:n?[a,a+t]:[a-t,a],x:[e.left,e.right],vertical:!0}}const r=n?t.top:t.bottom,o=n?e.bottom:e.top;let d,i;return n?(d=o+(r-o)/2,i=[a,d]):(d=r+(o-r)/2,i=[d,a]),{y:i,x:[e.left,e.right],vertical:!0}}function P(e,t,n,a=!1){const r=e.left+e.width/2;if(!t)return n?{x:[r,r+e.width],y:[e.top,e.bottom],vertical:!1}:{x:[e.left-10,r],y:[e.top,e.bottom],vertical:!1};if(n&&a)return{x:[r,e.right+10],y:[e.top,e.bottom],vertical:!1};if(n){const n=t.left+t.width/2;return{x:[r,r+Math.abs(r-n)/2],y:[e.top,e.bottom],vertical:!1}}return{x:[t.right+Math.abs(t.right-e.left)/2,r],y:[e.top,e.bottom],vertical:!1}}function v(e){const{top:t,bottom:n,left:a,right:r,height:o,width:d}=e.getBoundingClientRect(),i=window.scrollX||document.documentElement.scrollLeft,l=window.scrollY||document.documentElement.scrollTop;return{top:t+l,bottom:n+l,left:a+i,right:r+i,height:o,width:d}}function m(e){if(!ge(B)&&!ue(B))return;const t=H.get(e);if(!t)return;const n=t.enabledNodes;n.forEach(((t,a)=>{t.data.range={};const r=n[a-1],o=n[a+1],d=v(t.el),i=r?v(r.el):void 0,l=o?v(o.el):void 0,s=i&&(d.top>i.bottom||d.bottom<i.top),c=l&&(d.top>l.bottom||d.bottom<l.top);.8*e.getBoundingClientRect().width<d.width?(t.data.range.ascending=p(d,l,!0),t.data.range.descending=p(d,i,!1)):c&&!s?(t.data.range.ascending=P(d,l,!0,!0),t.data.range.descending=P(d,i,!1)):s||c?s&&!l?t.data.range.ascending=P(d,void 0,!0):s&&!c&&(t.data.range.ascending=P(d,l,!0),t.data.range.descending=P(d,void 0,!1)):(t.data.range.ascending=P(d,l,!0),t.data.range.descending=P(d,i,!1))}))}function h(e){e.targetData.parent.data.config.nativeDrag&&e.e.preventDefault()}function D(t,n,a,r=!1){if(e(t),r&&t instanceof PointerEvent)return;const{x:o,y:d}=i(t),l=o,s=d,c=window.scrollX||document.documentElement.scrollLeft,u=window.scrollY||document.documentElement.scrollTop;a.coordinates.x=l+c,a.coordinates.y=s+u;const f=n.parent.data.nestedParent;let p=n.parent;if(f){const e=f.el.getBoundingClientRect();a.coordinates.y>e.top&&a.coordinates.y<e.bottom&&(p=f)}p.el===a.currentParent?.el?function(e,t){if(!1===e.data.config.sortable)return;if(e.el===g.draggedOverParent?.el&&0===g.draggedOverParent.data.getValues(e.el).length)return;g.draggedOverParent?.el&&(dt([g.draggedOverParent.el],g.draggedOverParent.data.config.dropZoneClass),g.draggedOverParent=null);const n=b(e.data.enabledNodes,t);if(!n)return;const a=n[1];if(n){const t=n[0].data.range?n[0].data.range[a]:void 0;t&&y(e,t,"ascending"===n[1],n[0],g)}}(p,a):function(e,t){if(e.el===t.currentParent.el)return!1;const n=e.data.config;if(t.draggedNode.el.contains(e.el))return!1;if(!1===n.dropZone)return;const a=t.initialParent.data.config;if(n.accepts)return n.accepts(e,t.initialParent,t.currentParent,t);if(!n.group||n.group!==a.group)return!1;if(e.data.getValues(e.el).length){dt([t.currentParent.el],n.dropZoneClass);const a=b(e.data.enabledNodes,t);if(!a)return;const r=a[1];if(a){const t=a[0].data.range?a[0].data.range[r]:void 0;t&&y(e,t,"ascending"===a[1],a[0],g)}}else{rt([e.el],n.dropZoneClass),g.draggedOverParent=e;const t=g.insertPoint;t&&(t.el.style.display="none")}}(p,a),a.currentParent=p}function N(e,t){D(e.e,e.targetData,t,!0)}function x(e){const{detail:t}=e,{state:n,targetData:a}=t;n.scrolling||D(t.e,a,n)}function b(e,t){let n=null;for(let a=0;a<e.length;a++)if(t&&e[a].data.range){if(e[a].data.range.ascending&&t.coordinates.y>e[a].data.range.ascending.y[0]&&t.coordinates.y<e[a].data.range.ascending.y[1]&&t.coordinates.x>e[a].data.range.ascending.x[0]&&t.coordinates.x<e[a].data.range.ascending.x[1])return n=[e[a],"ascending"],n;if(e[a].data.range.descending&&t.coordinates.y>e[a].data.range.descending.y[0]&&t.coordinates.y<e[a].data.range.descending.y[1]&&t.coordinates.x>e[a].data.range.descending.x[0]&&t.coordinates.x<e[a].data.range.descending.x[1])return n=[e[a],"descending"],n}}function y(e,t,n,a,r){if(r.insertPoint?.el!==e.el&&(function(e){e.insertPoint?.el&&e.insertPoint.el.remove(),e.insertPoint=null}(r),function(e,t){const n=e.data.config.insertConfig?.insertPoint({el:e.el,data:e.data});if(!n)throw new Error("Insert point not found",{cause:e});t.insertPoint={parent:e,el:n},document.body.appendChild(n),Object.assign(n.style,{position:"absolute",display:"none"})}(e,r)),r.draggedOverNodes=[a],r.insertPoint){if(r.insertPoint.el.style.display="block",t.vertical){const e=r.insertPoint.el.getBoundingClientRect().height,a=t.y[n?1:0]-e/2;Object.assign(r.insertPoint.el.style,{top:`${a}px`,left:`${t.x[0]}px`,right:`${t.x[1]}px`,width:t.x[1]-t.x[0]+"px"})}else{const e=t.x[n?1:0]-r.insertPoint.el.getBoundingClientRect().width/2;r.insertPoint.el.style.left=`${e}px`,Object.assign(r.insertPoint.el.style,{top:`${t.y[0]}px`,bottom:`${t.y[1]}px`,height:t.y[1]-t.y[0]+"px"})}r.targetIndex=a.data.index,r.ascending=n}}var S,w={draggedOverNodes:Array(),initialDraggedIndex:void 0,transferred:!1,dragging:!1};function C(e={}){return t=>{const n=H.get(t);if(!n)return;const a={...n.config,dropSwapConfig:e};return{setup(){a.handleNodeDragover=e.handleNodeDragover||O,a.handleParentDragover=e.handleParentDragover||X,a.handleNodePointerover=e.handleNodePointerover||Z,a.handleParentPointerover=e.handleParentPointerover||Y;const t=a.handleEnd;a.handleEnd=e=>{!function(e){const t=ue(e);dt([e.currentParent.el],t?e.currentParent.data.config.synthDropZoneParentClass:e.currentParent.data.config.dropZoneParentClass),dt(w.draggedOverNodes.map((e=>e.el)),t?e.currentParent.data.config.synthDropZoneClass:e.currentParent.data.config.dropZoneClass);const n=oe(e.currentParent.el,e.currentParent.data),a=e.draggedNodes.map((e=>e.data.value)),r=n.filter((e=>!a.includes(e))),o=w.draggedOverNodes[0]?.data.index,d=e.draggedNodes[0].data.index,i=oe(e.initialParent.el,e.initialParent.data);if(void 0===o){if(e.initialParent.el===e.currentParent.el)return;const t=i.filter((e=>!a.includes(e)));return de(e.initialParent.el,e.initialParent.data,t),void de(e.currentParent.el,e.currentParent.data,n.concat(a))}let l=!1;const s=e.initialParent.data.config.dropSwapConfig?.shouldSwap;s&&(l=s({sourceParent:e.initialParent,targetParent:e.currentParent,draggedNodes:e.draggedNodes,targetNodes:w.draggedOverNodes,state:e}));if(e.initialParent.el===e.currentParent.el)r.splice(o,0,...a),de(e.currentParent.el,e.currentParent.data,l?V(n,null,d,o):r),e.initialParent.data.config.onSort&&e.initialParent.data.config.onSort({parent:{el:e.initialParent.el,data:e.initialParent.data},previousValues:[...i],previousNodes:[...e.initialParent.data.enabledNodes],nodes:[...e.initialParent.data.enabledNodes],values:[...r],draggedNodes:e.draggedNodes,previousPosition:d,position:o,targetNodes:w.draggedOverNodes,state:e});else if(l){const t=V(i,r,e.initialIndex,o);de(e.initialParent.el,e.initialParent.data,t[0]),de(e.currentParent.el,e.currentParent.data,t[1])}else{const t=i.filter((e=>!a.includes(e)));de(e.initialParent.el,e.initialParent.data,t),r.splice(o,0,...a),de(e.currentParent.el,e.currentParent.data,r)}e.currentParent.data.config.onTransfer&&e.currentParent.data.config.onTransfer({sourceParent:e.currentParent,targetParent:e.initialParent,initialParent:e.initialParent,draggedNodes:e.draggedNodes,targetIndex:o,state:e,targetNodes:w.draggedOverNodes});e.initialParent.data.config.onTransfer&&e.initialParent.data.config.onTransfer({sourceParent:e.initialParent,targetParent:e.currentParent,initialParent:e.initialParent,draggedNodes:e.draggedNodes,targetIndex:o,state:e,targetNodes:w.draggedOverNodes})}(e),t(e)},n.on("dragStarted",(()=>{S=ut(document,{dragover:E,handleRootPointerover:T})})),n.on("dragEnded",(()=>{S?.abort()})),n.config=a}}}}function E(e){ge(B)&&(dt([B.currentParent.el],B.currentParent.data.config.dropZoneParentClass),B.currentParent=B.initialParent)}function T(e){ue(B)&&(dt([B.currentParent.el],B.currentParent.data.config.synthDropZoneParentClass),B.currentParent=B.initialParent)}function I(e,t){const n="detail"in e?e.detail.targetData:e.targetData,a=n.parent.data.config,r=ue(t)?a.synthDropZoneClass:a.dropZoneClass;dt(w.draggedOverNodes.map((e=>e.el)),r);const o=n.parent.data.enabledNodes;o&&(w.draggedOverNodes=o.slice(n.node.data.index,n.node.data.index+t.draggedNodes.length),at(w.draggedOverNodes.map((e=>e.el)),r,!0),t.currentTargetValue=n.node.data.value,t.currentParent=n.parent,ot(t.currentParent.el,ue(t)?a.synthDropZoneParentClass:a.dropZoneParentClass,t.currentParent.data,!0))}function O(e,t){e.e.preventDefault(),e.e.stopPropagation(),I(e,t)}function X(e,t){e.e.preventDefault(),e.e.stopPropagation();const n=t.currentParent.data.config;dt(w.draggedOverNodes.map((e=>e.el)),n.dropZoneClass),dt([t.currentParent.el],n.dropZoneParentClass);const a=e.targetData.parent.data.config;ot(e.targetData.parent.el,a.dropZoneParentClass,e.targetData.parent.data,!0),w.draggedOverNodes=[],t.currentParent=e.targetData.parent}function Y(e){const t=e.detail.state.currentParent.data.config;dt(w.draggedOverNodes.map((e=>e.el)),t.synthDropZoneClass),dt([e.detail.state.currentParent.el],t.synthDropZoneParentClass);const n=e.detail.targetData.parent.data.config;ot(e.detail.targetData.parent.el,n.synthDropZoneParentClass,e.detail.targetData.parent.data,!0),w.draggedOverNodes=[],e.detail.state.currentParent=e.detail.targetData.parent}function Z(e){ue(e.detail.state)&&I(e,e.detail.state)}function V(e,t,n,a){const r=Array.isArray(n)?n:[n];if(null===t){const t=r.map((t=>e[t])),n=e[a];return e.splice(a,1,...t),r.forEach(((t,a)=>{e[t]=0===a?n:void 0})),e.filter((e=>void 0!==e))}{const n=r.map((t=>e[t])),o=t[a];return t.splice(a,1,...n),r.forEach(((t,n)=>{e[t]=0===n?o:void 0})),[e.filter((e=>void 0!==e)),t]}}var A="undefined"!=typeof window,H=new WeakMap,R=new WeakMap;function k(){if(!A)return!1;if("userAgentData"in navigator)return!0===navigator.userAgentData.mobile;const e=navigator.userAgent,t=/android|iphone|ipod/i.test(e),n=/iPad/.test(e)||e.includes("Macintosh")&&navigator.maxTouchPoints>1;return t||n}var L,F,B={affectedNodes:[],coordinates:{x:0,y:0},currentTargetValue:void 0,on:r,emit:a,originalZIndex:void 0,pointerSelection:!1,preventEnter:!1,rootUserSelect:void 0,nodePointerdown:void 0,longPress:!1,scrolling:!1,longPressTimeout:void 0,remapJustFinished:!1,selectedNodes:[],selectedParent:void 0,preventSynthDrag:!1,pointerDown:void 0,lastScrollContainerX:null,lastScrollContainerY:null,rootScrollWidth:void 0,rootScrollHeight:void 0,dragItemRect:void 0,windowScrollX:void 0,windowScrollY:void 0,lastScrollDirectionX:void 0,lastScrollDirectionY:void 0,scrollDebounceTimeout:void 0,frameIdX:void 0,frameIdY:void 0},M=!1;function $(){B.scrollDebounceTimeout&&clearTimeout(B.scrollDebounceTimeout),B.longPressTimeout&&clearTimeout(B.longPressTimeout),void 0!==B.frameIdX&&cancelAnimationFrame(B.frameIdX),void 0!==B.frameIdY&&cancelAnimationFrame(B.frameIdY);B={...{affectedNodes:[],coordinates:{x:0,y:0},on:r,emit:a,currentTargetValue:void 0,originalZIndex:void 0,pointerId:void 0,preventEnter:!1,remapJustFinished:!1,selectedNodes:[],nodePointerdown:void 0,rootUserSelect:void 0,preventSynthDrag:!1,scrolling:!1,selectedParent:void 0,pointerSelection:!1,synthScrollDirection:void 0,draggedNodeDisplay:void 0,synthDragScrolling:!1,longPress:!1,pointerDown:void 0,longPressTimeout:void 0,lastScrollContainerX:null,lastScrollContainerY:null,rootScrollWidth:void 0,rootScrollHeight:void 0,dragItemRect:void 0,windowScrollX:void 0,windowScrollY:void 0,lastScrollDirectionX:void 0,lastScrollDirectionY:void 0,scrollDebounceTimeout:void 0,frameIdX:void 0,frameIdY:void 0}}}function j(e){return Object.assign(B,e),e.initialParent.data.emit("dragStarted",B),M=!1,B.emit("dragStarted",B),B}function z(){B.activeState&&ee(B.activeState.parent,void 0,B),B.selectedState&&te(B.selectedState.nodes,B.selectedState.parent,B),B.selectedState=B.activeState=void 0}function W(){if(B.pointerDown&&(B.pointerDown.node.el.draggable=!0),B.pointerDown=void 0,!ue(B))return;const e=B.currentParent.data.config;ue(B)&&e.handleEnd(B)}function q(e){"Escape"===e.key&&(B.selectedState&&te(B.selectedState.nodes,B.selectedState.parent,B),B.activeState&&ee(B.activeState.parent,void 0,B),B.selectedState=B.activeState=void 0)}function J(e){if(!ge(B))return;M=!0;(0,B.initialParent.data.config.handleEnd)(B)}function K(t){if(!ge(B))return;e(t);const{x:n,y:a}=i(t);ge(B)&&st({x:n,y:a},t,B)}function U(t){if(!B.pointerDown||!B.pointerDown.validated)return;const n=B.pointerDown.parent.data.config;if("mouse"!==t.pointerType||k())if(ue(B))ue(B)&&ze(t,B);else{if(e(t),n.longPress&&!B.longPress)return clearTimeout(B.longPressTimeout),void(B.longPress=!1);const a=n.draggedNodes(B.pointerDown);n.dragstartClasses(B.pointerDown.node,a,n,!0);const r=B.pointerDown.node.el.getBoundingClientRect(),o=function(e,t,n,a,r,o){const d=t.data.config;let i,l;const s=["display","flexDirection","alignItems","justifyContent","padding","paddingTop","margin","marginTop","marginBottom","marginLeft","marginRight","paddingBottom","paddingLeft","paddingRight","border","borderRadius","background","backgroundColor","boxShadow","font","color","lineHeight","gap","width","height","boxSizing","overflow"],c=(e,t)=>{const n=window.getComputedStyle(e);s.forEach((e=>{t.style[e]=n[e]}))},g=(e,t={})=>{Object.assign(e.style,{position:"absolute",zIndex:"9999",pointerEvents:"none",willChange:"transform",boxSizing:"border-box",opacity:"0",overflow:"hidden",width:`${o.width}px`,height:`${o.height}px`,...t})};if(d.synthDragImage)l=d.synthDragImage(e,t,n,r),i=l.dragImage,i.setAttribute("popover","manual"),g(i);else if(d.multiDrag&&1!==r.length){const e=document.createElement("div");e.setAttribute("popover","manual"),r.forEach((t=>{const n=t.el.cloneNode(!0);c(t.el,n),n.style.pointerEvents="none",n.style.margin="0",e.append(n)})),e.style.display="flex",e.style.flexDirection="column",e.style.padding="0",e.style.margin="0",e.style.position="absolute",e.style.zIndex="9999",e.style.pointerEvents="none",i=e}else i=e.el.cloneNode(!0),c(e.el,i),i.setAttribute("popover","manual"),g(i);i.id="dnd-dragged-node-clone",t.el.appendChild(i),i.showPopover();const u={clonedDraggedEls:[],clonedDraggedNode:i,synthDragScrolling:!1,synthDragging:!0,rootScrollWidth:document.scrollingElement?.scrollWidth,rootScrollHeight:document.scrollingElement?.scrollHeight},f=j({...G(e,t,n,r,l?.offsetX,l?.offsetY),...u});return f}(B.pointerDown.node,B.pointerDown.parent,t,0,a,r);ze(t,o,!0)}}function _({parent:t,getValues:a,setValues:r,config:o={}}){if(!A)return;L||(L=ut(document,{dragover:K,pointerdown:z,pointerup:W,keydown:q,drop:J,pointermove:U,pointercancel:et(o.handlePointercancel),touchmove:t=>{ge(B)&&t.cancelable&&e(t)},contextmenu:t=>{ue(B)&&e(t)}})),ce(t);const[d,i]=n(),l={getValues:a,setValues:r,config:{dragDropEffect:o.dragDropEffect??"move",dragEffectAllowed:o.dragEffectAllowed??"move",draggedNodes:ye,dragstartClasses:Ee,handleNodeKeydown:Ye,handleDragstart:we,handleNodeDragover:We,handleParentDragover:qe,handleNodeDrop:Ae,handleNodeFocus:He,handleNodeBlur:Re,handlePointercancel:Le,handleEnd:Fe,handleDragend:ke,handleParentFocus:ae,handleNodePointerup:Be,handleNodePointerover:Ve,handleParentPointerover:Je,handleParentScroll:Se,handleNodePointerdown:Ce,handleNodeDragenter:Ue,handleNodeDragleave:_e,handleParentDrop:se,multiDrag:o.multiDrag??!1,nativeDrag:o.nativeDrag??!0,performSort:Q,performTransfer:re,root:o.root??document,setupNode:pe,setupNodeRemap:Pe,reapplyDragClasses:ve,tearDownNode:he,tearDownNodeRemap:me,remapFinished:xe,threshold:{horizontal:0,vertical:0},...o},enabledNodes:[],abortControllers:{},privateClasses:[],on:i,emit:d};new MutationObserver(De).observe(t,{childList:!0}),H.set(t,l),o.plugins?.forEach((e=>{e(t)?.tearDown?.()})),o.plugins?.forEach((e=>{e(t)?.tearDown?.()})),o.plugins?.forEach((e=>{e(t)?.setup?.()})),function(e,t){t.abortControllers.mainParent=ut(e,{dragover:nt(t.config.handleParentDragover),handleParentPointerover:t.config.handleParentPointerover,scroll:nt(t.config.handleParentScroll),drop:nt(t.config.handleParentDrop),hasNestedParent:e=>{const t=H.get(e.target);t&&(t.nestedParent=e.detail.parent)},focus:nt(t.config.handleParentFocus)}),t.config.externalDragHandle&&t.config.externalDragHandle.el&&t.config.externalDragHandle.callback&&(t.abortControllers.externalDragHandle=ut(t.config.externalDragHandle.el,{pointerdown:e=>{if(!t.config.externalDragHandle||!t.config.externalDragHandle.callback)return;const n=t.config.externalDragHandle.callback();if(!gt(n))return void console.warn("No draggable item found from external drag handle callback");const a=R.get(n);if(!a)return;const r=n.parentNode;if(!(r instanceof HTMLElement))return;const o=H.get(r);o&&(B.pointerDown={parent:{el:r,data:o},node:{el:n,data:a},validated:!0},n.draggable=!0)}}))}(t,l),Ne(t,!0)}function G(e,t,n,a,r,o){const{x:d,y:l}=i(n),s=e.el.getBoundingClientRect();return{affectedNodes:[],ascendingDirection:!1,clonedDraggedEls:[],coordinates:{x:d,y:l},draggedNode:{el:e.el,data:e.data},draggedNodes:a,incomingDirection:void 0,initialIndex:e.data.index,initialParent:{el:t.el,data:t.data},currentParent:{el:t.el,data:t.data},longPress:t.data.config.longPress??!1,longPressTimeout:void 0,currentTargetValue:e.data.value,scrollEls:[],startLeft:r||d-(s?.left??0),startTop:o||l-(s?.top??0),targetIndex:e.data.index,transferred:!1}}function Q({parent:e,draggedNodes:t,targetNodes:n}){Ne(e.el);const a=t.map((e=>e.data.value)),r=oe(e.el,e.data),d=t[0].data.index,i=[...e.data.enabledNodes],l=[...r.filter((e=>!a.some((t=>o(e,t)))))];l.splice(n[0].data.index,0,...a),"draggedNode"in B&&(B.currentTargetValue=n[0].data.value),de(e.el,e.data,[...l]),e.data.config.onSort&&e.data.config.onSort({parent:{el:e.el,data:e.data},previousValues:[...r],previousNodes:[...i],nodes:[...e.data.enabledNodes],values:[...l],draggedNodes:t,previousPosition:d,position:n[0].data.index,targetNodes:n,state:B})}function ee(e,t,n){n.activeState=t?{node:t,parent:e}:void 0}function te(e,t,n){const a=t.data.config.selectedClass;if(!n.selectedState)return;const r=Array.from(e);dt(e.map((e=>e.el)),a);for(const e of r){e.el.setAttribute("aria-selected","false");const t=n.selectedState.nodes.findIndex((t=>t.el===e.el));-1!==t&&n.selectedState.nodes.splice(t,1)}}function ne(e,t,n,a,r=!1){a.pointerSelection=r;for(const n of t)n.el.setAttribute("aria-selected","true"),at([n.el],e.data.config.selectedClass,!0);a.selectedState={nodes:t,parent:e},ee(e,n,a)}function ae(e,t){const n=e.targetData.parent.data.enabledNodes[0];n&&(t.selectedState&&t.selectedState.parent.el!==e.targetData.parent.el?ee(e.targetData.parent,n,t):t.selectedState||ee(e.targetData.parent,n,t))}function re({currentParent:e,targetParent:t,initialParent:n,draggedNodes:a,initialIndex:r,targetNodes:d,state:i}){Ne(n.el);const l=a.map((e=>e.data.value)),s=[...oe(e.el,e.data).filter((e=>!l.some((t=>o(e,t)))))],c=oe(t.el,t.data),g=n.el===t.el&&!1===t.data.config.sortable;let u;d.length?(u=g?r:!1===t.data.config.sortable?t.data.enabledNodes.length:d[0].data.index,c.splice(u,0,...l)):(u=g?r:t.data.enabledNodes.length,c.splice(u,0,...l)),de(e.el,e.data,s),de(t.el,t.data,c),t.data.config.onTransfer&&t.data.config.onTransfer({sourceParent:e,targetParent:t,initialParent:n,draggedNodes:a,targetIndex:u,state:i,targetNodes:d}),e.data.config.onTransfer&&e.data.config.onTransfer({sourceParent:e,targetParent:t,initialParent:n,draggedNodes:a,targetIndex:u,state:i,targetNodes:d||[]})}function oe(e,t){return[...t.getValues(e)]}function de(e,t,n){t.setValues(n,e)}function ie(e){return[...e.draggedNodes.map((e=>e.data.value))]}function le(e,t){const n=H.get(e);n&&(H.set(e,{...n,config:{...n.config,...t}}),_({parent:e,getValues:n.getValues,setValues:n.setValues,config:t}))}function se(e,n){t(e.e),M=!0;(0,n.initialParent.data.config.handleEnd)(n)}function ce(e){const t=H.get(e);t&&t.abortControllers.mainParent&&t.abortControllers.mainParent.abort()}function ge(e){return"draggedNode"in e&&!!e.draggedNode}function ue(e){return"synthDragging"in e&&!!e.synthDragging}function fe(e,t){for(const n in t)e.setAttribute(n,t[n])}function pe(t){const n=t.parent.data.config;t.node.data.abortControllers.mainNode=ut(t.node.el,{keydown:et(n.handleNodeKeydown),dragstart:et(n.handleDragstart),dragover:et(n.handleNodeDragover),dragenter:et(n.handleNodeDragenter),dragleave:et(n.handleNodeDragleave),dragend:et(n.handleDragend),drop:et(n.handleNodeDrop),focus:et(n.handleNodeFocus),blur:et(n.handleNodeBlur),pointerup:et(n.handleNodePointerup),pointercancel:et(n.handlePointercancel),pointerdown:et(n.handleNodePointerdown),handleNodePointerover:n.handleNodePointerover,touchmove:t=>{ge(B)&&t.cancelable&&e(t)},contextmenu:t=>{ue(B)&&e(t)}}),t.node.el.draggable=!0,n.reapplyDragClasses(t.node.el,t.parent.data),t.parent.data.config.plugins?.forEach((e=>{e(t.parent.el)?.setupNode?.(t)}))}function Pe(e){R.set(e.node.el,e.node.data),e.parent.data.config.plugins?.forEach((t=>{t(e.parent.el)?.setupNodeRemap?.(e)}))}function ve(e,t){if(!ge(B))return;const n=ue(B)?t.config.synthDropZoneClass:t.config.dropZoneClass;B.draggedNode.el===e&&at([e],n,!0)}function me(e){e.parent.data.config.plugins?.forEach((t=>{t(e.parent.el)?.tearDownNodeRemap?.(e)}))}function he(e){e.parent.data.config.plugins?.forEach((t=>{t(e.parent.el)?.tearDownNode?.(e)})),e.node.el.draggable=!1,e.node.data?.abortControllers?.mainNode&&e.node.data?.abortControllers?.mainNode.abort()}function De(e){if(1===e.length&&1===e[0].addedNodes.length&&!(e[0].addedNodes[0]instanceof HTMLElement))return;const t=e[0].target;if(!(t instanceof HTMLElement))return;H.get(t)&&Ne(t)}function Ne(e,t){const n=H.get(e);if(!n)return;n.privateClasses=Array.from(e.classList);const a=[],r=n.config;for(let o=0;o<e.children.length;o++){const d=e.children[o];if(!gt(d)||"dnd-dragged-node-clone"===d.id)continue;const i=R.get(d);!t&&i||r.tearDownNode({parent:{el:e,data:n},node:{el:d,data:i}}),r.disabled||(!r.draggable||r.draggable&&r.draggable(d))&&a.push(d)}if(a.length!==n.getValues(e).length&&!r.disabled)return void console.warn("The number of draggable items defined in the parent element does not match the number of values. This may cause unexpected behavior.");const d=n.getValues(e),i=[];for(let l=0;l<a.length;l++){const s=a[l],c=R.get(s);if(r.draggableValue&&!r.draggableValue(d[l]))continue;const g=Object.assign(c??{privateClasses:[],abortControllers:{}},{value:d[l],index:l});if(!ge(B)&&B.activeState&&o(B.activeState.node.data.value,g.value)&&ee({data:n,el:e},{el:s,data:g},B),ge(B)&&o(B.draggedNode.data.value,g.value)){B.draggedNode.data=g,B.draggedNode.el=s;const e=B.draggedNodes.find((e=>e.data.value===g.value));e&&(e.el=s)}i.push({el:s,data:g}),!t&&c||r.setupNode({parent:{el:e,data:n},node:{el:s,data:g}}),Pe({parent:{el:e,data:n},node:{el:s,data:g}})}H.set(e,{...n,enabledNodes:i}),r.remapFinished(n),n.config.plugins?.forEach((t=>{t(e)?.remapFinished?.()}))}function xe(){B.remapJustFinished=!0,"draggedNode"in B&&(B.affectedNodes=[])}function be(e){return!!e.targetData.parent.data.config.nativeDrag}function ye(e){return e.parent.data.config.multiDrag?B.selectedState?[e.node,...B.selectedState?.nodes.filter((t=>t.el!==e.node.el))]:[]:[e.node]}function Se(e){ge(B)&&(B.emit("scrollStarted",B),ue(B)||(B.preventEnter=!0,F&&clearTimeout(F),F=setTimeout((()=>{B.preventEnter=!1,B.emit("scrollEnded",B)}),100)))}function we(t,n){const a=t.targetData.parent.data.config;if(!a.nativeDrag||!be(t)||!Ie({x:t.e.clientX,y:t.e.clientY,node:t.targetData.node,config:a}))return void e(t.e);let r=a.draggedNodes({parent:t.targetData.parent,node:t.targetData.node});0===r.length&&(r=[t.targetData.node]),a.dragstartClasses(t.targetData.node,r,a);const o=Te(t,r);if(a.onDragstart){const e={parent:t.targetData.parent,values:oe(t.targetData.parent.el,t.targetData.parent.data),draggedNode:o.draggedNode,draggedNodes:o.draggedNodes,position:o.initialIndex,state:o};a.onDragstart(e)}}function Ce(e,n){if(t(e.e),n.pointerDown={parent:e.targetData.parent,node:e.targetData.node,validated:!1},!Ie({x:e.e.clientX,y:e.e.clientY,node:e.targetData.node,config:e.targetData.parent.data.config}))return;n.pointerDown.validated=!0,Me(e,n,e.targetData.node);const a=e.targetData.parent.data;let r=[e.targetData.node];const o=e.e.ctrlKey||e.e.metaKey,d=e.e.shiftKey,i=e.targetData.node;if(o&&a.config.multiDrag){if(n.selectedState){r=-1===n.selectedState.nodes.findIndex((e=>e.el===i.el))?[...n.selectedState.nodes,i]:n.selectedState.nodes.filter((e=>e.el!==i.el))}else r=[i];ne(e.targetData.parent,r,e.targetData.node,n,!0)}else if(d&&a.config.multiDrag){const t=e.targetData.parent.data.enabledNodes;if(n.selectedState&&n.activeState)if(n.selectedState.parent.el!==e.targetData.parent.el){te(n.selectedState.nodes,n.selectedState.parent,n),n.selectedState=void 0;for(let e=0;e<=i.data.index;e++)r.push(t[e])}else{const[a,o]=n.activeState.node.data.index<e.targetData.node.data.index?[n.activeState.node.data.index,e.targetData.node.data.index]:[e.targetData.node.data.index,n.activeState.node.data.index];r=t.slice(a,o+1)}else for(let e=0;e<=i.data.index;e++)r.push(t[e]);ne(e.targetData.parent,r,e.targetData.node,n,!0)}else if(n.selectedState?.nodes?.length){-1===n.selectedState.nodes.findIndex((t=>t.el===e.targetData.node.el))&&(n.selectedState.parent.el!==e.targetData.parent.el?te(n.selectedState.nodes,e.targetData.parent,n):a.config.multiDrag&&k()?r.push(...n.selectedState.nodes):te(n.selectedState.nodes,e.targetData.parent,n),ne(e.targetData.parent,r,e.targetData.node,n,!0))}else ne(e.targetData.parent,[e.targetData.node],e.targetData.node,n,!0)}function Ee(e,t,n,a=!1){at(t.map((e=>e.el)),a?n.synthDraggingClass:n.draggingClass),setTimeout((()=>{dt(t.map((e=>e.el)),a?n.synthDraggingClass:n.draggingClass),at(t.map((e=>e.el)),a?n.synthDragPlaceholderClass:n.dragPlaceholderClass),at(t.map((e=>e.el)),a?n.synthDropZoneClass:n.dropZoneClass),dt(t.map((e=>e.el)),n.selectedClass)}))}function Te(e,n){t(e.e);const a=j(G(e.targetData.node,e.targetData.parent,e.e,n));if(e.e.dataTransfer){const t=e.targetData.parent.data.config;let r;if(e.e.dataTransfer.dropEffect=t.dragDropEffect,e.e.dataTransfer.effectAllowed=t.dragEffectAllowed,e.e.dataTransfer.setData("text/plain",""),t.dragImage)r=t.dragImage(e,n);else{if(!t.multiDrag||1===n.length)return e.targetData.node.el.style.zIndex="9999",e.targetData.node.el.style.boxSizing="border-box",e.e.dataTransfer.setDragImage(e.targetData.node.el,e.e.offsetX,e.e.offsetY),a.originalZIndex=e.targetData.node.el.style.zIndex,a;{const t=document.createElement("div");t.setAttribute("id","dnd-dragged-node-clone"),t.setAttribute("popover","manual");for(const e of n){const n=e.el.cloneNode(!0);n.id=e.el.id+"-clone",n.style.pointerEvents="none",t.appendChild(n)}const{width:a}=n[0].el.getBoundingClientRect();Object.assign(t.style,{display:"flex",flexDirection:"column",width:`${a}px`,position:"absolute",pointerEvents:"none",zIndex:"9999",left:"-9999px",boxSizing:"border-box",background:"transparent",overflow:"hidden"}),e.targetData.parent.el.appendChild(t),t.showPopover(),t.getBoundingClientRect(),r=t,e.e.dataTransfer.setDragImage(r,e.e.offsetX,e.e.offsetY)}}setTimeout((()=>{r?.remove()}))}return a}function Ie({x:e,y:t,node:n,config:a}){if(a.externalDragHandle)return!1;if(!a.dragHandle)return!0;const r=n.el.querySelectorAll(a.dragHandle);if(!r)return!1;const o=a.root.elementFromPoint(e,t);if(!o)return!1;for(const e of Array.from(r))if(o===e||e.contains(o))return!0;return!1}function Oe(e){}function Xe(e){}function Ye(e){}function Ze(){let e;return()=>{clearTimeout(e),B&&(B.preventEnter=!0),e=setTimeout((()=>{B&&(B.preventEnter=!1)}),100)}}function Ve(e){e.detail.targetData.parent.el===e.detail.state.currentParent.el?Qe(e.detail,e.detail.state):tt(e.detail,e.detail.state)}function Ae(e,n){const a=e.targetData.parent.data.config;a.nativeDrag&&(t(e.e),M=!0,a.handleEnd(n))}function He(e){e.e.target!==e.e.currentTarget&&B.pointerDown&&(B.pointerDown.node.el.draggable=!1)}function Re(e){e.e.target!==e.e.currentTarget&&B.pointerDown&&(B.pointerDown.node.el.draggable=!0)}function ke(n,a){const r=n.targetData.parent.data.config;r.nativeDrag&&(e(n.e),t(n.e),M?M=!1:r.handleEnd(a))}function Le(t,n){if(!ue(n))return;if(e(t.e),M)return void(M=!1);const a=H.get(n.initialParent.el)?.config;a?.onDragend&&a.onDragend({parent:n.currentParent,values:oe(n.currentParent.el,n.currentParent.data),draggedNode:n.draggedNode,draggedNodes:n.draggedNodes,state:n}),a?.handleEnd(n)}function Fe(e){e.draggedNode&&(e.draggedNode.el.draggable=!0);const t=e.draggedNodes.map((e=>e.el)),n=e.initialParent.data,a=ue(e),r=H.get(e.initialParent.el)?.config,o=a?r?.synthDropZoneClass:r?.dropZoneClass,d=n?.config?.longPressClass,i=a?n?.config?.synthDragPlaceholderClass:n?.config?.dragPlaceholderClass,l=e.originalZIndex;ue(e)&&(e.clonedDraggedNode&&e.clonedDraggedNode.remove(),e.longPressTimeout&&clearTimeout(e.longPressTimeout)),$e(e),e.lastScrollDirectionX=void 0,e.lastScrollDirectionY=void 0,e.preventEnter=!1,e.scrollDebounceTimeout&&(clearTimeout(e.scrollDebounceTimeout),e.scrollDebounceTimeout=void 0),void 0!==l&&e.draggedNode&&(e.draggedNode.el.style.zIndex=l),requestAnimationFrame((()=>{dt(t,o),dt(t,d),dt(t,i)})),te(e.draggedNodes,e.currentParent,e),ee(e.currentParent,void 0,e);const s={...e};r?.onDragend?.({parent:s.currentParent,values:oe(s.currentParent.el,s.currentParent.data),draggedNode:s.draggedNode,draggedNodes:s.draggedNodes,state:s}),e.emit("dragEnded",s),$()}function Be(e,n){t(e.e),!n.pointerSelection&&n.selectedState&&te(n.selectedState.nodes,e.targetData.parent,n);const a=e.targetData.parent.data.config;n.pointerSelection=!1,"longPressTimeout"in n&&n.longPressTimeout&&clearTimeout(n.longPressTimeout),n.longPress=!1,dt(e.targetData.parent.data.enabledNodes.map((e=>e.el)),a.longPressClass),ge(n)&&a.handleEnd(n)}function Me(t,n,a){const r=t.targetData.parent.data.config;n.longPressTimeout=setTimeout((()=>{n&&(n.longPress=!0,r.longPressClass&&t.e.cancelable&&at([a.el],r.longPressClass),e(t.e))}),r.longPressDuration||1e3)}function $e(e,t=!0,n=!0){t&&(void 0!==e.frameIdX&&(cancelAnimationFrame(e.frameIdX),e.frameIdX=void 0),e.lastScrollDirectionX=void 0),n&&(void 0!==e.frameIdY&&(cancelAnimationFrame(e.frameIdY),e.frameIdY=void 0),e.lastScrollDirectionY=void 0),e.frameIdX||e.frameIdY||(e.preventEnter=!1)}function je(e,t=!1){const{x:n,y:a}=e.coordinates,r=e.startLeft??0,o=e.startTop??0,d=n-r+(window.scrollX??0),i=a-o+(window.scrollY??0);e.clonedDraggedNode.style.transform=`translate3d(${d}px, ${i}px, 0px)`,t&&(e.clonedDraggedNode.style.opacity="1",dt(e.draggedNodes.map((e=>e.el)),e.initialParent.data.config?.longPressClass))}function ze(e,t,n=!1){const a=i(e);t.coordinates.x=a.x,t.coordinates.y=a.y,je(t,n),t.scrollDebounceTimeout&&(clearTimeout(t.scrollDebounceTimeout),t.scrollDebounceTimeout=void 0),t.scrollDebounceTimeout=setTimeout((()=>{ue(t)&&st(t.coordinates,e,t)}),16);const r=ct(a);if(!r)return void document.dispatchEvent(new CustomEvent("handleRootPointerover",{detail:{e:e,state:t}}));const o={e:e,targetData:r,state:t};"node"in r?r.node.el.dispatchEvent(new CustomEvent("handleNodePointerover",{detail:o})):r.parent.el.dispatchEvent(new CustomEvent("handleParentPointerover",{detail:o}))}function We(n,a){if(!n.targetData.parent.data.config.nativeDrag)return;const{x:r,y:o}=i(n.e);a.coordinates.y=o,a.coordinates.x=r,e(n.e),t(n.e),ge(a)&&st({x:r,y:o},n.e,a),n.targetData.parent.el===a.currentParent?.el?Qe(n,a):tt(n,a)}function qe(n,a){if(!n.targetData.parent.data.config.nativeDrag)return;e(n.e),t(n.e);const{x:r,y:o}=i(n.e);ge(a)&&st({x:r,y:o},n.e,a),tt(n,a)}function Je(e){e.detail.targetData.parent.el!==e.detail.state.currentParent.el&&tt(e.detail,e.detail.state)}function Ke({currentParent:e,targetParent:t,initialParent:n,draggedNodes:a,state:r}){if(t.el===e.el)return!1;const o=t.data.config;if(a[0].el.contains(t.el))return!1;if(!1===o.dropZone)return!1;const d=n.data.config;return o.accepts?o.accepts(t,n,e,r):!(!o.group||o.group!==d.group)}function Ue(t,n){e(t.e)}function _e(t,n){e(t.e)}function Ge(e,t,n,a){if(t.affectedNodes.map((e=>e.data.value)).includes(e.targetData.node.data.value))return!1;if(t.remapJustFinished)return t.remapJustFinished=!1,(e.targetData.node.data.value===t.currentTargetValue||t.draggedNodes.map((e=>e.el)).includes(e.targetData.node.el))&&(t.currentTargetValue=e.targetData.node.data.value),!1;if(t.preventEnter)return!1;if(t.draggedNodes.map((e=>e.el)).includes(e.targetData.node.el))return t.currentTargetValue=void 0,!1;if(e.targetData.node.data.value===t.currentTargetValue)return!1;if(e.targetData.parent.el!==t.currentParent?.el||!1===e.targetData.parent.data.config.sortable)return!1;if(e.targetData.node.el.contains(t.draggedNodes[0].el))return!1;const r=e.targetData.node.el.getBoundingClientRect(),o=t.draggedNode.el.getBoundingClientRect(),d=r.y-o.y,i=r.x-o.x;let l;l=Math.abs(d)>Math.abs(i)?d>0?"above":"below":i>0?"left":"right";const s=t.currentParent.data.config.threshold;switch(l){case"left":if(n>r.x+r.width*s.horizontal)return t.incomingDirection="left",!0;break;case"right":if(n<r.x+r.width*(1-s.horizontal))return t.incomingDirection="right",!0;break;case"above":if(a>r.y+r.height*s.vertical)return t.incomingDirection="above",!0;break;case"below":if(a<r.y+r.height*(1-s.vertical))return t.incomingDirection="below",!0}return!1}function Qe(e,t){const{x:n,y:a}=i(e.e);if(!Ge(e,t,n,a))return;const r=t.draggedNode.data.index>e.targetData.node.data.index?[e.targetData.node.data.index,t.draggedNode.data.index]:[t.draggedNode.data.index,e.targetData.node.data.index];t.targetIndex=e.targetData.node.data.index,t.affectedNodes=e.targetData.parent.data.enabledNodes.filter((e=>r[0]<=e.data.index&&e.data.index<=r[1]&&e.el!==t.draggedNode.el)),e.targetData.parent.data.config.performSort({parent:e.targetData.parent,draggedNodes:t.draggedNodes,targetNodes:[e.targetData.node]})}function et(e){return t=>{const n=function(e){const t=R.get(e);if(!t)return;const n=H.get(e.parentNode);return n?{node:{el:e,data:t},parent:{el:e.parentNode,data:n}}:void 0}(t.currentTarget);if(n)return e({e:t,targetData:n},B)}}function tt(t,n){e(t.e),Ke({currentParent:n.currentParent,targetParent:t.targetData.parent,initialParent:n.initialParent,draggedNodes:n.draggedNodes,state:n})&&(t.targetData.parent.data.config.performTransfer({currentParent:n.currentParent,targetParent:t.targetData.parent,initialParent:n.initialParent,draggedNodes:n.draggedNodes,initialIndex:n.initialIndex,state:n,targetNodes:"node"in t.targetData?[t.targetData.node]:[]}),n.currentParent=t.targetData.parent,n.transferred=!0)}function nt(e){return t=>{const n=function(e){const t=H.get(e);if(t)return{parent:{el:e,data:t}}}(t.currentTarget);if(n)return e({e:t,targetData:n},B)}}function at(e,t,n=!1){function a(e,t){R.set(e,t)}for(const r of e){const e=ot(r,t,R.get(r),n);e&&a(r,e)}}function rt(e,t,n=!1){function a(e,t){H.set(e,t)}for(const r of e){const e=ot(r,t,H.get(r),n);e&&a(r,e)}}function ot(e,t,n,a=!1){if(!t)return;const r=d(t);if(!r.length)return;if(!n)return void e.classList.add(...r);const o=[];for(const t of r)e.classList.contains(t)?e.classList.contains(t)&&!1===a&&o.push(t):e.classList.add(t);return n.privateClasses=o,n}function dt(e,t){if(!t)return;const n=d(t);if(n.length)for(const t of e){if(!gt(t)){t.classList.remove(...n);continue}const e=R.get(t)||H.get(t);if(e)for(const a of n)e.privateClasses.includes(a)||t.classList.remove(a)}}function it(e,t,n,a,r){const o=.075,d="x"===r.axis,i=e===document.scrollingElement,l=d?"scrollLeft":"scrollTop",s=d?"clientWidth":"clientHeight",c=d?"offsetWidth":"offsetHeight",g=d?"scrollWidth":"scrollHeight",u=d?t.clientX:t.clientY,f=d?a.left:a.top,p=d?n.overflowX:n.overflowY;if(i){const t=e[l],n=e[s],a=t>0,i=t+n<(d?r.state.rootScrollWidth||0:e[g]);return d?{left:a&&u<n*o,right:i&&u>.925*n}:{up:a&&u<n*o,down:i&&u>.925*n}}if(("auto"===p||"scroll"===p)&&e!==document.body&&e!==document.documentElement){const t=e[g],n=e[c],a=e[l],r=a>0,i=a<t-n;return d?{left:r&&u<f+n*o,right:i&&u>f+.925*n}:{up:r&&u<f+n*o,down:i&&u>f+.925*n}}return d?{left:!1,right:!1}:{up:!1,down:!1}}function lt(e,t,n){const a=e.getBoundingClientRect();return t>=a.left&&t<=a.right&&n>=a.top&&n<=a.bottom}function st(e,t,n){if(!ge(n)||!n.draggedNode)return;$e(n);const{x:a,y:r}=e;let o=!1;const d=(e,t,a)=>{!function(e,t,n,a){if(!ge(n)||!n.draggedNode)return;n.preventEnter=!0;const r="x"===a.axis,o="positive"===a.direction?1:-1,d=r?"lastScrollDirectionX":"lastScrollDirectionY",i=r?"frameIdX":"frameIdY";void 0!==n[i]&&(cancelAnimationFrame(n[i]),n[i]=void 0),n[d]=a.direction;const l=()=>{if(!ge(n)||!n.draggedNode)return void(void 0!==n[i]&&(cancelAnimationFrame(n[i]),n[i]=void 0));const t=r?"scrollLeft":"scrollTop",a=r?"clientWidth":"clientHeight",s=r?"scrollWidth":"scrollHeight",c=e[t],g=e[a],u=e[s];if(!(o>0?c+g<u:c>0))return n[i]=void 0,void(n[d]=void 0);e[t]+=20*o,ue(n)&&je(n),n[i]=requestAnimationFrame(l)};n[i]=requestAnimationFrame(l)}(a,0,n,{axis:e,direction:t}),o=!0},i=e=>{const a=window.getComputedStyle(e),r=e.getBoundingClientRect(),o=it(e,t,a,r,{axis:"x",state:n}),i=it(e,t,a,r,{axis:"y"});(o.left||o.right)&&(n.lastScrollContainerX=e,d("x",o.right?"positive":"negative",e)),(i.up||i.down)&&(n.lastScrollContainerY=e,d("y",i.down?"positive":"negative",e))};if(n.lastScrollContainerX&&lt(n.lastScrollContainerX,a,r)&&i(n.lastScrollContainerX),!o&&n.lastScrollContainerY&&lt(n.lastScrollContainerY,a,r)&&i(n.lastScrollContainerY),!o){let e=document.elementFromPoint(a,r);for(;e&&!(o&&n.lastScrollContainerX&&n.lastScrollContainerY);)e instanceof HTMLElement&&i(e),e=e.parentElement}if(!o){const e=document.scrollingElement;e instanceof HTMLElement&&i(e)}o||$e(n)}function ct(e){let t,n=document.elementFromPoint(e.x,e.y);if(!gt(n))return;let a=!0;for(;n&&a;){if(R.has(n)||H.has(n)){a=!1,t=H.has(n);break}n=n.parentNode}if(t){const e=H.get(n);if(!e)return;return{parent:{el:n,data:e}}}{const e=R.get(n);if(!e)return;const t=H.get(n.parentNode);if(!t)return;return{node:{el:n,data:e},parent:{el:n.parentNode,data:t}}}}function gt(e){return e instanceof HTMLElement&&e.parentNode instanceof HTMLElement}function ut(e,t){const n=new AbortController;for(const a in t){const r=t[a];e.addEventListener(a,r,{signal:n.signal,passive:!1,capture:"focus"===a||"blur"===a})}return n}export{ot as addClass,ut as addEvents,at as addNodeClass,rt as addParentClass,l as animations,_ as dragAndDrop,G as dragStateProps,ie as dragValues,Ee as dragstartClasses,C as dropOrSwap,ct as getElFromPoint,Oe as handleClickNode,Xe as handleClickParent,ke as handleDragend,we as handleDragstart,Fe as handleEnd,Me as handleLongPress,Re as handleNodeBlur,We as handleNodeDragover,Ae as handleNodeDrop,He as handleNodeFocus,Ye as handleNodeKeydown,Ce as handleNodePointerdown,Ve as handleNodePointerover,Be as handleNodePointerup,qe as handleParentDragover,se as handleParentDrop,ae as handleParentFocus,Je as handleParentPointerover,Le as handlePointercancel,Te as initDrag,u as insert,A as isBrowser,ge as isDragState,gt as isNode,ue as isSynthDragState,et as nodeEventData,R as nodes,nt as parentEventData,oe as parentValues,H as parents,Q as performSort,re as performTransfer,Ze as preventSortOnScroll,xe as remapFinished,Ne as remapNodes,dt as removeClass,$ as resetState,fe as setAttrs,j as setDragState,de as setParentValues,pe as setupNode,Pe as setupNodeRemap,Qe as sort,B as state,ze as synthMove,ce as tearDown,he as tearDownNode,me as tearDownNodeRemap,tt as transfer,le as updateConfig,Ie as validateDragHandle,be as validateDragstart,Ge as validateSort,Ke as validateTransfer};export default null;
//# sourceMappingURL=/sm/5c32bf80fa4aca511d16aa062479332ac90efb14b86aaaa843c18b6e42308ac4.map